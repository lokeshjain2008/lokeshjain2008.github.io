---
layout: post
title: Create a simple REST web service with Python
date: '2013-12-03T10:16:00.002-08:00'
author: lokesh jain
tags:
- rest
- rest web service
- python
modified_time: '2013-12-03T10:16:58.876-08:00'
blogger_id: tag:blogger.com,1999:blog-3986102045809195254.post-854125262988076318
blogger_orig_url: http://phptricksand.blogspot.com/2013/12/create-simple-rest-web-service-with.html
---

<div dir="ltr" style="text-align: left;" trbidi="on"><div class="entry-content serendipity_entry_body" style="background-color: white; color: #333333; font-family: tahoma; font-size: 11px; letter-spacing: 1px;"><div style="font-family: Verdana, Arial; font-size: 1.25em;">This is a quick tutorial on how to create a simple RESTful web service using python.

</div><div style="font-family: Verdana, Arial; font-size: 1.25em;">The rest service uses web.py to create a server and it will have two URLs, one for accessing all users and one for accessing individual users:</div><pre class="prettyprint lang-sh prettyprinted" style="background-color: #333333; border: 1px solid rgb(136, 136, 136); font-family: Courier, monospace; font-size: 13px; padding: 2px;"><span class="pln" style="color: white;">http</span><span class="pun" style="color: white;">://</span><span class="pln" style="color: white;">localhost</span><span class="pun" style="color: white;">:</span><span class="lit" style="color: indianred;">8080</span><span class="pun" style="color: white;">/</span><span class="pln" style="color: white;">users<br />http</span><span class="pun" style="color: white;">://</span><span class="pln" style="color: white;">localhost</span><span class="pun" style="color: white;">:</span><span class="lit" style="color: indianred;">8080</span><span class="pun" style="color: white;">/</span><span class="pln" style="color: white;">users</span><span class="pun" style="color: white;">/{</span><span class="pln" style="color: white;">id</span><span class="pun" style="color: white;">}</span></pre></div><div class="serendipity_entry_extended" style="background-color: white; clear: both; color: #333333; font-family: tahoma; font-size: 11px; letter-spacing: 1px;"><div style="font-family: Verdana, Arial; font-size: 1.25em;">First you will want to install web.py if you don't have it already.</div><pre class="prettyprint lang-sh prettyprinted" style="background-color: #333333; border: 1px solid rgb(136, 136, 136); font-family: Courier, monospace; font-size: 13px; padding: 2px;"><span class="pln" style="color: white;">sudo easy_install web</span><span class="pun" style="color: white;">.</span><span class="pln" style="color: white;">py</span></pre><div style="font-family: Verdana, Arial; font-size: 1.25em;">Here is the XML file we will serve up.</div><b>user_data.xml</b><pre class="prettyprint lang-xml prettyprinted" style="background-color: #333333; border: 1px solid rgb(136, 136, 136); font-family: Courier, monospace; font-size: 13px; padding: 2px;"><span class="tag" style="color: khaki; font-weight: bold;">&lt;users&gt;</span><span class="pln" style="color: white;"><br />    </span><span class="tag" style="color: khaki; font-weight: bold;">&lt;user</span><span class="pln" style="color: white;"> </span><span class="atn" style="color: darkkhaki; font-weight: bold;">id</span><span class="pun" style="color: white;">=</span><span class="atv" style="color: #ffa0a0;">"1"</span><span class="pln" style="color: white;"> </span><span class="atn" style="color: darkkhaki; font-weight: bold;">name</span><span class="pun" style="color: white;">=</span><span class="atv" style="color: #ffa0a0;">"Rocky"</span><span class="pln" style="color: white;"> </span><span class="atn" style="color: darkkhaki; font-weight: bold;">age</span><span class="pun" style="color: white;">=</span><span class="atv" style="color: #ffa0a0;">"38"</span><span class="tag" style="color: khaki; font-weight: bold;">/&gt;</span><span class="pln" style="color: white;"><br />    </span><span class="tag" style="color: khaki; font-weight: bold;">&lt;user</span><span class="pln" style="color: white;"> </span><span class="atn" style="color: darkkhaki; font-weight: bold;">id</span><span class="pun" style="color: white;">=</span><span class="atv" style="color: #ffa0a0;">"2"</span><span class="pln" style="color: white;"> </span><span class="atn" style="color: darkkhaki; font-weight: bold;">name</span><span class="pun" style="color: white;">=</span><span class="atv" style="color: #ffa0a0;">"Steve"</span><span class="pln" style="color: white;"> </span><span class="atn" style="color: darkkhaki; font-weight: bold;">age</span><span class="pun" style="color: white;">=</span><span class="atv" style="color: #ffa0a0;">"50"</span><span class="tag" style="color: khaki; font-weight: bold;">/&gt;</span><span class="pln" style="color: white;"><br />    </span><span class="tag" style="color: khaki; font-weight: bold;">&lt;user</span><span class="pln" style="color: white;"> </span><span class="atn" style="color: darkkhaki; font-weight: bold;">id</span><span class="pun" style="color: white;">=</span><span class="atv" style="color: #ffa0a0;">"3"</span><span class="pln" style="color: white;"> </span><span class="atn" style="color: darkkhaki; font-weight: bold;">name</span><span class="pun" style="color: white;">=</span><span class="atv" style="color: #ffa0a0;">"Melinda"</span><span class="pln" style="color: white;"> </span><span class="atn" style="color: darkkhaki; font-weight: bold;">age</span><span class="pun" style="color: white;">=</span><span class="atv" style="color: #ffa0a0;">"38"</span><span class="tag" style="color: khaki; font-weight: bold;">/&gt;</span><span class="pln" style="color: white;"><br /></span><span class="tag" style="color: khaki; font-weight: bold;">&lt;/users&gt;</span></pre><div style="font-family: Verdana, Arial; font-size: 1.25em;">The code for the rest server is very simple:</div><b>rest.py</b><pre class="prettyprint lang-python prettyprinted" style="background-color: #333333; border: 1px solid rgb(136, 136, 136); font-family: Courier, monospace; font-size: 13px; padding: 2px;"><span class="com" style="color: skyblue;">#!/usr/bin/env python</span><span class="pln" style="color: white;"><br /></span><span class="kwd" style="color: khaki; font-weight: bold;">import</span><span class="pln" style="color: white;"> web<br /></span><span class="kwd" style="color: khaki; font-weight: bold;">import</span><span class="pln" style="color: white;"> xml</span><span class="pun" style="color: white;">.</span><span class="pln" style="color: white;">etree</span><span class="pun" style="color: white;">.</span><span class="typ" style="color: palegreen;">ElementTree</span><span class="pln" style="color: white;"> </span><span class="kwd" style="color: khaki; font-weight: bold;">as</span><span class="pln" style="color: white;"> ET<br /><br />tree </span><span class="pun" style="color: white;">=</span><span class="pln" style="color: white;"> ET</span><span class="pun" style="color: white;">.</span><span class="pln" style="color: white;">parse</span><span class="pun" style="color: white;">(</span><span class="str" style="color: #ffa0a0;">'user_data.xml'</span><span class="pun" style="color: white;">)</span><span class="pln" style="color: white;"><br />root </span><span class="pun" style="color: white;">=</span><span class="pln" style="color: white;"> tree</span><span class="pun" style="color: white;">.</span><span class="pln" style="color: white;">getroot</span><span class="pun" style="color: white;">()</span><span class="pln" style="color: white;"><br /><br />urls </span><span class="pun" style="color: white;">=</span><span class="pln" style="color: white;"> </span><span class="pun" style="color: white;">(</span><span class="pln" style="color: white;"><br />    </span><span class="str" style="color: #ffa0a0;">'/users'</span><span class="pun" style="color: white;">,</span><span class="pln" style="color: white;"> </span><span class="str" style="color: #ffa0a0;">'list_users'</span><span class="pun" style="color: white;">,</span><span class="pln" style="color: white;"><br />    </span><span class="str" style="color: #ffa0a0;">'/users/(.*)'</span><span class="pun" style="color: white;">,</span><span class="pln" style="color: white;"> </span><span class="str" style="color: #ffa0a0;">'get_user'</span><span class="pln" style="color: white;"><br /></span><span class="pun" style="color: white;">)</span><span class="pln" style="color: white;"><br /><br />app </span><span class="pun" style="color: white;">=</span><span class="pln" style="color: white;"> web</span><span class="pun" style="color: white;">.</span><span class="pln" style="color: white;">application</span><span class="pun" style="color: white;">(</span><span class="pln" style="color: white;">urls</span><span class="pun" style="color: white;">,</span><span class="pln" style="color: white;"> globals</span><span class="pun" style="color: white;">())</span><span class="pln" style="color: white;"><br /><br /></span><span class="kwd" style="color: khaki; font-weight: bold;">class</span><span class="pln" style="color: white;"> list_users</span><span class="pun" style="color: white;">:</span><span class="pln" style="color: white;">        <br />    </span><span class="kwd" style="color: khaki; font-weight: bold;">def</span><span class="pln" style="color: white;"> GET</span><span class="pun" style="color: white;">(</span><span class="pln" style="color: white;">self</span><span class="pun" style="color: white;">):</span><span class="pln" style="color: white;"><br /> output </span><span class="pun" style="color: white;">=</span><span class="pln" style="color: white;"> </span><span class="str" style="color: #ffa0a0;">'users:['</span><span class="pun" style="color: white;">;</span><span class="pln" style="color: white;"><br /> </span><span class="kwd" style="color: khaki; font-weight: bold;">for</span><span class="pln" style="color: white;"> child </span><span class="kwd" style="color: khaki; font-weight: bold;">in</span><span class="pln" style="color: white;"> root</span><span class="pun" style="color: white;">:</span><span class="pln" style="color: white;"><br />                </span><span class="kwd" style="color: khaki; font-weight: bold;">print</span><span class="pln" style="color: white;"> </span><span class="str" style="color: #ffa0a0;">'child'</span><span class="pun" style="color: white;">,</span><span class="pln" style="color: white;"> child</span><span class="pun" style="color: white;">.</span><span class="pln" style="color: white;">tag</span><span class="pun" style="color: white;">,</span><span class="pln" style="color: white;"> child</span><span class="pun" style="color: white;">.</span><span class="pln" style="color: white;">attrib<br />                output </span><span class="pun" style="color: white;">+=</span><span class="pln" style="color: white;"> str</span><span class="pun" style="color: white;">(</span><span class="pln" style="color: white;">child</span><span class="pun" style="color: white;">.</span><span class="pln" style="color: white;">attrib</span><span class="pun" style="color: white;">)</span><span class="pln" style="color: white;"> </span><span class="pun" style="color: white;">+</span><span class="pln" style="color: white;"> </span><span class="str" style="color: #ffa0a0;">','</span><span class="pln" style="color: white;"><br /> output </span><span class="pun" style="color: white;">+=</span><span class="pln" style="color: white;"> </span><span class="str" style="color: #ffa0a0;">']'</span><span class="pun" style="color: white;">;</span><span class="pln" style="color: white;"><br />        </span><span class="kwd" style="color: khaki; font-weight: bold;">return</span><span class="pln" style="color: white;"> output<br /><br /></span><span class="kwd" style="color: khaki; font-weight: bold;">class</span><span class="pln" style="color: white;"> get_user</span><span class="pun" style="color: white;">:</span><span class="pln" style="color: white;"><br />    </span><span class="kwd" style="color: khaki; font-weight: bold;">def</span><span class="pln" style="color: white;"> GET</span><span class="pun" style="color: white;">(</span><span class="pln" style="color: white;">self</span><span class="pun" style="color: white;">,</span><span class="pln" style="color: white;"> user</span><span class="pun" style="color: white;">):</span><span class="pln" style="color: white;"><br /> </span><span class="kwd" style="color: khaki; font-weight: bold;">for</span><span class="pln" style="color: white;"> child </span><span class="kwd" style="color: khaki; font-weight: bold;">in</span><span class="pln" style="color: white;"> root</span><span class="pun" style="color: white;">:</span><span class="pln" style="color: white;"><br />  </span><span class="kwd" style="color: khaki; font-weight: bold;">if</span><span class="pln" style="color: white;"> child</span><span class="pun" style="color: white;">.</span><span class="pln" style="color: white;">attrib</span><span class="pun" style="color: white;">[</span><span class="str" style="color: #ffa0a0;">'id'</span><span class="pun" style="color: white;">]</span><span class="pln" style="color: white;"> </span><span class="pun" style="color: white;">==</span><span class="pln" style="color: white;"> user</span><span class="pun" style="color: white;">:</span><span class="pln" style="color: white;"><br />      </span><span class="kwd" style="color: khaki; font-weight: bold;">return</span><span class="pln" style="color: white;"> str</span><span class="pun" style="color: white;">(</span><span class="pln" style="color: white;">child</span><span class="pun" style="color: white;">.</span><span class="pln" style="color: white;">attrib</span><span class="pun" style="color: white;">)</span><span class="pln" style="color: white;"><br /><br /></span><span class="kwd" style="color: khaki; font-weight: bold;">if</span><span class="pln" style="color: white;"> </span><u><span class="pln" style="color: white;">_name_</span></u><span class="pln" style="color: white;"> </span><span class="pun" style="color: white;">==</span><span class="pln" style="color: white;"> </span><span class="str" style="color: #ffa0a0;">"</span><u><span class="str" style="color: #ffa0a0;">_main_</span></u><span class="str" style="color: #ffa0a0;">"</span><span class="pun" style="color: white;">:</span><span class="pln" style="color: white;"><br />    app</span><span class="pun" style="color: white;">.</span><span class="pln" style="color: white;">run</span><span class="pun" style="color: white;">()</span></pre><div style="font-family: Verdana, Arial; font-size: 1.25em;">To run your service, simply run:</div><pre class="prettyprint lang-sh prettyprinted" style="background-color: #333333; border: 1px solid rgb(136, 136, 136); font-family: Courier, monospace; font-size: 13px; padding: 2px;"><span class="pun" style="color: white;">./</span><span class="pln" style="color: white;">rest</span><span class="pun" style="color: white;">.</span><span class="pln" style="color: white;">py</span></pre><div style="font-family: Verdana, Arial; font-size: 1.25em;">This creates a web server on port 8080 to serve up the requests. This service returns JSON responses, you can use any of the following URLs to see an example:</div><pre class="prettyprint lang-sh prettyprinted" style="background-color: #333333; border: 1px solid rgb(136, 136, 136); font-family: Courier, monospace; font-size: 13px; padding: 2px;"><span class="pln" style="color: white;">http</span><span class="pun" style="color: white;">://</span><span class="pln" style="color: white;">localhost</span><span class="pun" style="color: white;">:</span><span class="lit" style="color: indianred;">8080</span><span class="pun" style="color: white;">/</span><span class="pln" style="color: white;">users<br />http</span><span class="pun" style="color: white;">://</span><span class="pln" style="color: white;">localhost</span><span class="pun" style="color: white;">:</span><span class="lit" style="color: indianred;">8080</span><span class="pun" style="color: white;">/</span><span class="pln" style="color: white;">users</span><span class="pun" style="color: white;">/</span><span class="lit" style="color: indianred;">1</span><span class="pln" style="color: white;"><br />http</span><span class="pun" style="color: white;">://</span><span class="pln" style="color: white;">localhost</span><span class="pun" style="color: white;">:</span><span class="lit" style="color: indianred;">8080</span><span class="pun" style="color: white;">/</span><span class="pln" style="color: white;">users</span><span class="pun" style="color: white;">/</span><span class="lit" style="color: indianred;">2</span><span class="pln" style="color: white;"><br />http</span><span class="pun" style="color: white;">://</span><span class="pln" style="color: white;">localhost</span><span class="pun" style="color: white;">:</span><span class="lit" style="color: indianred;">8080</span><span class="pun" style="color: white;">/</span><span class="pln" style="color: white;">users</span><span class="pun" style="color: white;">/</span><span class="lit" style="color: indianred;">3</span></pre><div style="font-family: Verdana, Arial; font-size: 1.25em;">Don't forget to check out my&nbsp;<a href="http://www.dreamsyssoft.com/python-scripting-tutorial/" style="color: #235587; text-decoration: none;">python shell scripting tutorial.</a></div></div></div>
