---
layout: post
title: Block and Proc in function in ruby..
date: '2015-01-30T05:28:00.001-08:00'
author: lokesh jain
tags: 
modified_time: '2015-01-30T05:28:08.345-08:00'
blogger_id: tag:blogger.com,1999:blog-3986102045809195254.post-1710912940376496072
blogger_orig_url: http://phptricksand.blogspot.com/2015/01/block-and-proc-in-function-in-ruby.html
---

<div class="p1"><span class="s1">&gt;&gt; </span><span class="s2">#Lets study the block and procs in the details</span></div><div class="p2"><span class="s2">&gt;&gt;&nbsp; &nbsp; &nbsp; &nbsp; &nbsp; &nbsp;</span></div><div class="p1"><span class="s1">&gt;&gt; </span><span class="s2"># 1. pass, block, proc as an argument to the funcion</span></div><div class="p1"><span class="s1">&gt;&gt; </span><span class="s3">def</span><span class="s1"> </span><span class="s2">test_proc</span><span class="s1"> a</span></div><div class="p2"><span class="s2">&nbsp;| &nbsp; a.call </span><span class="s3">if</span><span class="s2"> a</span></div><div class="p2"><span class="s2">&nbsp;| </span><span class="s3">end</span><span class="s2"> &nbsp;</span></div><div class="p3"><span class="s1">=&gt; </span><span class="s2">:test_proc</span></div><div class="p1"><span class="s1">&gt;&gt; </span><span class="s2">#passing a proc to the function</span></div><div class="p2"><span class="s2">&gt;&gt; test_proc -</span></div><div class="p2"><span class="s2">&nbsp;|&nbsp;</span></div><div class="p2"><span class="s2">&nbsp;| ;</span></div><div class="p2"><span class="s2">SyntaxError: unexpected ';'</span></div><div class="p4"><span class="s1">&gt;&gt; test_proc -&gt;{p </span><span class="s2">"Hey tell me this : #{self}"</span><span class="s1">}</span></div><div class="p2"><span class="s2">"Hey tell me this : main"</span></div><div class="p4"><span class="s1">=&gt; </span><span class="s2">"Hey tell me this : main"</span></div><div class="p1"><span class="s1">&gt;&gt; </span><span class="s2"># This worked as expected as we passed proc/lambda to the function</span></div><div class="p5"><span class="s2"></span><br /></div><div class="p1"><span class="s1">&gt;&gt; </span><span class="s2">#Now try with block</span></div><div class="p4"><span class="s1">&gt;&gt; test_proc {p </span><span class="s2">"Hey tell me this : #{self}"</span><span class="s1">}</span></div><div class="p2"><span class="s2">ArgumentError: wrong number of arguments (0 for 1)</span></div><div class="p2"><span class="s2">from (pry):23:in `test_proc'</span></div><div class="p1"><span class="s1">&gt;&gt; </span><span class="s2">#Yeah, thats correct we havn't send any prameter(value or object)</span></div><div class="p2"><span class="s2">&gt;&gt;&nbsp;</span></div><div class="p1"><span class="s1">&gt;&gt; </span><span class="s2">#How to access a block in function ??? There are two ways 1. convert it to the porc itself</span></div><div class="p1"><span class="s1">&gt;&gt; </span><span class="s2"># 2. use yield to call for a passed block in ruby</span><span class="s1">&nbsp;</span></div><div class="p1"><span class="s1">&gt;&gt; </span><span class="s2"># Now, try method 1 for the block</span></div><div class="p2"><span class="s2">&gt;&gt; </span><span class="s3">def</span><span class="s2"> </span><span class="s4">test_proc</span><span class="s2"> &amp;block</span></div><div class="p2"><span class="s2">&nbsp;| &nbsp; p block.class</span></div><div class="p2"><span class="s2">&nbsp;| &nbsp; block.call</span></div><div class="p2"><span class="s2">&nbsp;| </span><span class="s3">end</span><span class="s2"> &nbsp;</span></div><div class="p3"><span class="s1">=&gt; </span><span class="s2">:test_proc</span></div><div class="p4"><span class="s1">&gt;&gt; test_proc {p </span><span class="s2">"Hey tell me this : #{self}"</span><span class="s1">}</span></div><div class="p2"><span class="s2">Proc</span></div><div class="p2"><span class="s2">"Hey tell me this : main"</span></div><div class="p4"><span class="s1">=&gt; </span><span class="s2">"Hey tell me this : main"</span></div><div class="p1"><span class="s1">&gt;&gt; </span><span class="s2"># Note '&amp;' changes a block to proc, we have printed 'block.class' and that truned to be a proc</span></div><div class="p2"><span class="s2">&gt;&gt;&nbsp;</span></div><div class="p1"><span class="s1">&gt;&gt; </span><span class="s2">#Note: but this is not an ideal case we can't be sure if need to send block everytime. For this we have a weapon called 'yield'</span></div><div class="p1"><span class="s1">&gt;&gt; </span><span class="s2">#Using 'yield'</span></div><div class="p2"><span class="s2">&gt;&gt; &nbsp;</span></div><div class="p1"><span class="s1">&gt;&gt; </span><span class="s3">def</span><span class="s1"> </span><span class="s2">test_proc</span><span class="s1">&nbsp;</span></div><div class="p1"><span class="s1">&nbsp;| &nbsp; </span><span class="s3">yield</span><span class="s1"> </span><span class="s3">if</span><span class="s1"> block_given? </span><span class="s2">#call if block is passed to the function</span></div><div class="p2"><span class="s2">&nbsp;| </span><span class="s3">end</span><span class="s2"> &nbsp;</span></div><div class="p3"><span class="s1">=&gt; </span><span class="s2">:test_proc</span></div><div class="p4"><span class="s1">&gt;&gt; test_proc {p </span><span class="s2">"Hey tell me this : #{self}"</span><span class="s1">}</span></div><div class="p2"><span class="s2">"Hey tell me this : main"</span></div><div class="p4"><span class="s1">=&gt; </span><span class="s2">"Hey tell me this : main"</span></div><br /><br /><div class="p2"><span class="s2">&gt;&gt;&nbsp;</span></div>