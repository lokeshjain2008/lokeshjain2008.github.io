---
layout: post
title: Cookie and Headers in GAE. some example and tricks here.
date: '2013-11-13T12:43:00.002-08:00'
author: lokesh jain
tags: 
modified_time: '2013-11-13T12:44:12.279-08:00'
blogger_id: tag:blogger.com,1999:blog-3986102045809195254.post-7348394298721222679
blogger_orig_url: http://phptricksand.blogspot.com/2013/11/cookie-and-headers-in-gae-some-example.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">some other info's<br /><br />like to call super in the function<br />call it like<br /><br /><span style="background-color: #d0e0e3;">super(&lt;ClassName&gt;,self).&lt;function_name&gt;()</span><br /><span style="background-color: #d0e0e3;"><br /></span>for the traceback<br /><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; line-height: 1.626; margin-bottom: 10px; overflow-x: auto; padding: 1.618em; word-break: break-all; word-wrap: normal;"><span class="nd">@decorator2</span><br /><span class="nd">@decorator1</span><br /><span class="k" style="color: black; font-weight: 700;">def</span> <span class="nf" style="color: #990000; font-weight: 700;">some_method</span><span class="p">():</span><br />    <span class="c" style="color: #888888; font-style: italic;"># do stuff </span></pre><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; line-height: 1.626; margin-bottom: 10px; overflow-x: auto; padding: 1.618em; word-break: break-all; word-wrap: normal;"><span style="color: #888888;"><i>is same like<br /></i></span><pre style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 1.626; margin-bottom: 10px; overflow-x: auto; padding: 1.618em; word-break: break-all; word-wrap: normal;"><span class="n">wrapped_method</span> <span class="o">=</span> <span class="n">decorator2</span><span class="p">(</span><span class="n">decorator1</span><span class="p">(</span><span class="n">some_method</span><span class="p">))</span></pre></pre>== get status and set_satus<br />self.response.set_status(205,message="this is massage")<br />self.response.clear()<br /><br /><br />some other info's<br /><br />like to call super in the function<br />call it like<br /><br /><span style="background-color: #d0e0e3;">super(&lt;ClassName&gt;,self).&lt;function_name&gt;()</span><br /><span style="background-color: #d0e0e3;"><br /></span>for the traceback<br /><br /><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; line-height: 1.626; margin-bottom: 10px; overflow-x: auto; padding: 1.618em; word-break: break-all; word-wrap: normal;"><span class="nd">@decorator2</span><br /><span class="nd">@decorator1</span><br /><span class="k" style="color: black; font-weight: 700;">def</span> <span class="nf" style="color: #990000; font-weight: 700;">some_method</span><span class="p">():</span><br />    <span class="c" style="color: #888888; font-style: italic;"># do stuff </span></pre><pre style="background-color: whitesmoke; border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; line-height: 1.626; margin-bottom: 10px; overflow-x: auto; padding: 1.618em; word-break: break-all; word-wrap: normal;"><span style="color: #888888;"><i>is same like<br /></i></span><pre style="border-bottom-left-radius: 4px; border-bottom-right-radius: 4px; border-top-left-radius: 4px; border-top-right-radius: 4px; border: 1px solid rgba(0, 0, 0, 0.14902); color: #333333; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; line-height: 1.626; margin-bottom: 10px; overflow-x: auto; padding: 1.618em; word-break: break-all; word-wrap: normal;"><span class="n">wrapped_method</span> <span class="o">=</span> <span class="n">decorator2</span><span class="p">(</span><span class="n">decorator1</span><span class="p">(</span><span class="n">some_method</span><span class="p">))</span></pre></pre>== get status and set_satus<br />self.response.set_status(205,message="this is massage")<br />self.response.clear()<br /><br /><br />1.======================== HEADERS ====================================<br /><br />1.1 add headers<br /><pre class="prettyprint" style="background-color: #fafafa; border: 1px solid rgb(187, 187, 187); color: #007000; font-family: 'Droid Sans Mono', monospace; font-size: 13px; line-height: 1.5; margin-bottom: 1.5em; margin-top: 1.5em; overflow: auto; padding: 6px 10px; vertical-align: baseline;"><span class="pln" style="border: 0px; color: black; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">img_data </span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">=</span><span class="pln" style="border: 0px; color: black; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"> get_status_image_for_current_user</span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">()</span><span class="pln" style="border: 0px; color: black; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd" style="border: 0px; color: #000088; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">self</span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">.</span><span class="pln" style="border: 0px; color: black; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">response</span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">.</span><span class="pln" style="border: 0px; color: black; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">headers</span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">[</span><span class="str" style="border: 0px; color: #008800; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">"Content-Type"</span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">]</span><span class="pln" style="border: 0px; color: black; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"> </span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">=</span><span class="pln" style="border: 0px; color: black; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"> </span><span class="str" style="border: 0px; color: #008800; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">"image/png"</span><span class="pln" style="border: 0px; color: black; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd" style="border: 0px; color: #000088; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">self</span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">.</span><span class="pln" style="border: 0px; color: black; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">response</span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">.</span><span class="pln" style="border: 0px; color: black; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">headers</span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">.</span><span class="pln" style="border: 0px; color: black; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">add_header</span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">(</span><span class="str" style="border: 0px; color: #008800; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">"Expires"</span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">,</span><span class="pln" style="border: 0px; color: black; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"> </span><span class="str" style="border: 0px; color: #008800; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">"Thu, 01 Dec 1994 16:00:00 GMT"</span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">)</span><span class="pln" style="border: 0px; color: black; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;"><br />&nbsp; &nbsp; &nbsp; &nbsp; </span><span class="kwd" style="border: 0px; color: #000088; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">self</span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">.</span><span class="pln" style="border: 0px; color: black; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">response</span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">.</span><span class="kwd" style="border: 0px; color: #000088; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">out</span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">.</span><span class="pln" style="border: 0px; color: black; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">write</span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">(</span><span class="pln" style="border: 0px; color: black; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">img_data</span><span class="pun" style="border: 0px; color: #666600; font-family: inherit; font-style: inherit; margin: 0px; padding: 0px; vertical-align: baseline;">)</span></pre><pre class="prettyprint" style="background-color: #fafafa; border: 1px solid rgb(187, 187, 187); font-family: 'Droid Sans Mono', monospace; font-size: 13px; line-height: 1.5; margin-bottom: 1.5em; margin-top: 1.5em; overflow: auto; padding: 6px 10px; vertical-align: baseline;"><span style="color: #666600;">Below is the code to make file downloadable and they are attached to as files.</span></pre><pre style="background-color: #eeffcc; border-bottom-color: rgb(170, 204, 153); border-bottom-width: 1px; border-style: solid none; border-top-color: rgb(170, 204, 153); border-top-width: 1px; color: #333333; line-height: 15px; overflow-x: auto; overflow-y: hidden; padding: 5px; text-align: justify;"><span class="n">add_header</span><span class="p">(</span><span class="s" style="color: #4070a0;">'content-disposition'</span><span class="p">,</span> <span class="s" style="color: #4070a0;">'attachment'</span><span class="p">,</span> <span class="n">filename</span><span class="o" style="color: #666666;">=</span><span class="s" style="color: #4070a0;">'bud.gif'</span><span class="p">)</span></pre><br /># Note: set_status<br />self.error(500);<br />self.response.clear();<br />self.response.set_status(code,message="message for this error");<br /><br /><b><i><u><tt class="docutils literal" style="background-color: white; font-size: small; line-height: 16px;"><span class="pre" style="color: #007000;">response.headers.getall(key)</span></tt><span style="background-color: white; font-family: Helvetica, Arial, sans-serif; font-size: x-small; line-height: 16px;">.</span></u></i></b><br /><br /><br />2. ============================= Coookie ===================================<br /><span style="background-color: white; font-family: Helvetica, Arial, sans-serif; font-size: x-small; line-height: 16px;">Cookies are set in the response object. The methods to handle cookies are:</span><br /><dl class="docutils" style="background-color: white; font-family: Helvetica, Arial, sans-serif; font-size: small; line-height: 16px; margin: 0em 0px 0px; padding: 0px;"><dt style="font-weight: 700; margin: 0.75em 0px 0px; padding: 0px;">set_cookie(key, value=’‘, max_age=None, path=’/’, domain=None, secure=None, httponly=False, comment=None, expires=None, overwrite=False)</dt><dd style="margin: 0.4em 0px 0px 2em; padding: 0px;">Sets a cookie.</dd><dt style="font-weight: 700; margin: 0.75em 0px 0px; padding: 0px;">delete_cookie(key, path=’/’, domain=None)</dt><dd style="margin: 0.4em 0px 0px 2em; padding: 0px;">Deletes a cookie previously set in the client.</dd><dt style="font-weight: 700; margin: 0.75em 0px 0px; padding: 0px;">unset_cookie(key)</dt><dd style="margin: 0.4em 0px 0px 2em; padding: 0px;">Unsets a cookie previously set in the response object. Note that this doesn’t delete the cookie from clients, only from the response.</dd></dl><div style="background-color: white; font-family: Helvetica, Arial, sans-serif; font-size: small; line-height: 16px; padding: 1em 0px 0px;">For example:</div><div class="highlight-python" style="background-color: white; font-family: Helvetica, Arial, sans-serif; font-size: small;"><div class="highlight"><pre style="background-color: #fafafa; border: 1px solid rgb(187, 187, 187); font-size: 9pt; line-height: 15px; margin-top: 1em; overflow: auto; padding: 0.99em; word-wrap: break-word;"><span class="c" style="color: maroon;"># Saves a cookie in the client.</span><br /><span class="n">response</span><span class="o" style="color: #606000;">.</span><span class="n">set_cookie</span><span class="p">(</span><span class="s" style="color: green;">'some_key'</span><span class="p">,</span> <span class="s" style="color: green;">'value'</span><span class="p">,</span> <span class="n">max_age</span><span class="o" style="color: #606000;">=</span><span class="mi" style="color: green;">360</span><span class="p">,</span> <span class="n">path</span><span class="o" style="color: #606000;">=</span><span class="s" style="color: green;">'/'</span><span class="p">,</span><br />                    <span class="n">domain</span><span class="o" style="color: #606000;">=</span><span class="s" style="color: green;">'example.org'</span><span class="p">,</span> <span class="n">secure</span><span class="o" style="color: #606000;">=</span><span class="bp" style="color: navy;">True</span><span class="p">)</span><br /><br /><span class="c" style="color: maroon;"># Deletes a cookie previously set in the client.</span><br /><span class="n">response</span><span class="o" style="color: #606000;">.</span><span class="n">delete_cookie</span><span class="p">(</span><span class="s" style="color: green;">'bad_cookie'</span><span class="p">)</span><br /><br /><span class="c" style="color: maroon;"># Cancels a cookie previously set in the response.</span><br /><span class="n">response</span><span class="o" style="color: #606000;">.</span><span class="n">unset_cookie</span><span class="p">(</span><span class="s" style="color: green;">'some_key'</span><span class="p">)</span><br /></pre></div></div><div style="background-color: white; font-family: Helvetica, Arial, sans-serif; font-size: small; line-height: 16px; padding: 1em 0px 0px;">Only the&nbsp;<tt class="docutils literal" style="font-size: 13px;"><span class="pre" style="color: #007000;">key</span></tt>&nbsp;parameter is required. The parameters are:</div><dl class="docutils" style="background-color: white; font-family: Helvetica, Arial, sans-serif; font-size: small; line-height: 16px; margin: 0em 0px 0px; padding: 0px;"><dt style="font-weight: 700; margin: 0.75em 0px 0px; padding: 0px;">key</dt><dd style="margin: 0.4em 0px 0px 2em; padding: 0px;">Cookie name.</dd><dt style="font-weight: 700; margin: 0.75em 0px 0px; padding: 0px;">value</dt><dd style="margin: 0.4em 0px 0px 2em; padding: 0px;">Cookie value.</dd><dt style="font-weight: 700; margin: 0.75em 0px 0px; padding: 0px;">expires</dt><dd style="margin: 0.4em 0px 0px 2em; padding: 0px;">An expiration date. Must be a&nbsp;<a class="reference external" href="http://docs.python.org/2.7/library/datetime.html#datetime" style="color: #551a8b;" title="(in Python v2.7)"><tt class="docutils literal" style="background-color: transparent; font-size: 13px; font-weight: bold;"><span class="pre" style="font-weight: normal;">datetime</span></tt></a>.datetime object. Use this instead of max_age since the former is not supported by Internet Explorer.</dd></dl>============================ REQUEST / RESPONSE ================<br />FOR ALL READ FROM HERE<br /><a href="http://webapp-improved.appspot.com/guide/request.html#files">http://webapp-improved.appspot.com/guide/request.html#files</a><br /><br /><br /><br /><br /></div>