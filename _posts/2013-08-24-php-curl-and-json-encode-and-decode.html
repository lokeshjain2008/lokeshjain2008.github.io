---
layout: post
title: PHP CURL and json encode and decode..
date: '2013-08-23T12:29:00.000-07:00'
author: lokesh jain
tags:
- curl
- json encode and decode
- facebook
- php json
- php
modified_time: '2013-09-30T04:52:07.797-07:00'
blogger_id: tag:blogger.com,1999:blog-3986102045809195254.post-97545298937815918
blogger_orig_url: http://phptricksand.blogspot.com/2013/08/php-curl-and-json-encode-and-decode.html
---

<div dir="ltr" style="text-align: left;" trbidi="on">HI , this is very simple but hard to start using CURL in php<br />1. This is use to make http request to other sites like


<br />you can download data from other sites or make API calls to fetch some data like (Facebook's graph api).<br /><br />Before we start we have to check if CURL is enabled or not.<br />&nbsp;to check<br />user<br />1.<br /><blockquote class="tr_bq">&lt;?php<br />function _isCurl(){<br />if(function_exists('curl_init')){<br />echo "Yes! we have curl";<br />}<br />}</blockquote><br />2.<br />just do the<br /><blockquote class="tr_bq">&lt;?php<br />php_info();</blockquote><br />and look for the curl<br /><br />3. if its not enabled then<br />go to your php.ini file<br />and uncomment this line<br /><span class="pun" style="border: 0px; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif; font-size: 14px; line-height: 18px; margin: 0px; padding: 0px; vertical-align: baseline;">;</span><span class="pln" style="border: 0px; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif; font-size: 14px; line-height: 18px; margin: 0px; padding: 0px; vertical-align: baseline;">extension</span><span class="pun" style="border: 0px; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif; font-size: 14px; line-height: 18px; margin: 0px; padding: 0px; vertical-align: baseline;">=</span><span class="pln" style="border: 0px; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif; font-size: 14px; line-height: 18px; margin: 0px; padding: 0px; vertical-align: baseline;">php_curl</span><span class="pun" style="border: 0px; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif; font-size: 14px; line-height: 18px; margin: 0px; padding: 0px; vertical-align: baseline;">.</span><span class="pln" style="border: 0px; font-family: Consolas, Menlo, Monaco, 'Lucida Console', 'Liberation Mono', 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Courier New', monospace, serif; font-size: 14px; line-height: 18px; margin: 0px; padding: 0px; vertical-align: baseline;">dll</span><br /><br />if still you have problem with your curl then goto this link to get help&nbsp;<a href="http://stackoverflow.com/questions/10939248/php-curl-not-working-wamp-on-windows-7-64-bit" target="_blank">link</a>&nbsp;.<br /><br />Lets start some curls.<br /><br /><span style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">Before we can do anything with a cURL request, we need to first instantiate an instance of cURL - we can do this by calling the function&nbsp;</span><code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">curl_init();</code><span style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">, which returns a cURL resource.&nbsp;</span><br /><span style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><br /></span><br /><h3 style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 24px; font-weight: 200; line-height: 1; margin-bottom: 10px;">Settings</h3><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">Once we've got a cURL resource, we can begin to assign some settings, below is a list of some of the core ones that I set</div><ul style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><li><code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">CURLOPT_RETURNTRANSFER</code>&nbsp;- Return the response as a string instead of outputting it to the screen</li><li><code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">CURLOPT_CONNECTTIMEOUT</code>&nbsp;- Number of seconds to spend attempting to connect</li><li><code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">CURLOPT_TIMEOUT</code>&nbsp;- Number of seconds to allow cURL to execute</li><li><code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">CURLOPT_USERAGENT</code>&nbsp;- Useragent string to use for request</li><li><code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">CURLOPT_URL</code>&nbsp;- URL to send request to</li><li><code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">CURLOPT_POST</code>&nbsp;- Send request as&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">POST</code></li><li><code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">CURLOPT_POSTFIELDS</code>&nbsp;- Array of data to POST in request</li></ul><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">We can set a setting by using the&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">curl_setopt()</code>&nbsp;method, which takes three parameters, the cURL resource, the setting and the value. So, to set the URL that we're sending the request to as&nbsp;<em>http://testcURL.com</em>:</div><pre style="color: #272822; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; white-space: pre-wrap; word-wrap: break-word;"><code class="php" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: #dddddd; display: block; font-family: Monaco, Consolas, monospace; line-height: 1.5; padding: 0.5em;"><span class="variable">$curl</span> = curl_init();<br />curl_setopt(<span class="variable">$curl</span>, CURLOPT_URL, <span class="string" style="color: #a6e22e;">'http://testcURL.com'</span>);<br /></code></pre><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">As mentioned, we can set the URL by sending a parameter through when getting the cURL resource:</div><pre style="color: #272822; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; white-space: pre-wrap; word-wrap: break-word;"><code class="php" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: #dddddd; display: block; font-family: Monaco, Consolas, monospace; line-height: 1.5; padding: 0.5em;"><span class="variable">$curl</span> = curl_init(<span class="string" style="color: #a6e22e;">'http://testcURL.com'</span>);<br /></code></pre><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">It is possible to set multiple settings at one time by passing through an array of settings and values to the function&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">curl_setopt_array()</code>:</div><pre style="color: #272822; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; white-space: pre-wrap; word-wrap: break-word;"><code class="php" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: #dddddd; display: block; font-family: Monaco, Consolas, monospace; line-height: 1.5; padding: 0.5em;"><span class="variable">$curl</span> = curl_init();<br />curl_setopt_array(<span class="variable">$curl</span>, <span class="keyword" style="color: #f92672; font-weight: bold;">array</span>(<br />    CURLOPT_RETURNTRANSFER =&gt; <span class="number">1</span>,<br />    CURLOPT_URL =&gt; <span class="string" style="color: #a6e22e;">'http://testcURL.com'</span><br />));<br /></code></pre><h3 style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 24px; font-weight: 200; line-height: 1; margin-bottom: 10px;">Sending request</h3><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">When all of the options are sent, and the request is ready to send, we can call the<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">curl_exec()</code>&nbsp;method which will execute the cURL request. This function can return three different things:</div><ul style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><li><code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">false</code>&nbsp;- if there is an error executing the request</li><li><code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">true</code>&nbsp;- if the request executed without error and&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">CURLOPT_RETURNTRANSFER</code>&nbsp;is set to&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">false</code></li><li><em>The result</em>&nbsp;- if the request executed without error and&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">CURLOPT_RETURNTRANSFER</code>&nbsp;is set to&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">true</code></li></ul><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">Using the previous example, where we are wanting to get the result back, we would use the following:</div><pre style="color: #272822; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; white-space: pre-wrap; word-wrap: break-word;"><code class="php" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: #dddddd; display: block; font-family: Monaco, Consolas, monospace; line-height: 1.5; padding: 0.5em;"><span class="variable">$result</span> = curl_exec(<span class="variable">$curl</span>);<br /></code></pre><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">With&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">$result</code>&nbsp;now containing the response from the page - which might be JSON, a string or a full blown site's HTML.</div><h2 style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 32px; font-weight: 100; line-height: 1; margin-bottom: 10px; margin-top: 20px;">Close Request</h2><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">When you've sent a request and got the result back, you should look to close the cURL request so that you can free up some system resources, this is as simple as calling the<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">curl_close()</code>&nbsp;method which as with all other functions takes the resource as its parameter.</div><h2 style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 32px; font-weight: 100; line-height: 1; margin-bottom: 10px; margin-top: 20px;">GET Request</h2><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">A&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">GET</code>&nbsp;request is the default request method that is used, and is very straight forward to use, infact all of the examples so far have been&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">GET</code>&nbsp;requests. If you want to send parameters along in the request you simply append them to the URL as a query string such as<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">http://testcURL.com/?item1=value&amp;item2=value2</code>.</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">So for example to send a&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">GET</code>&nbsp;request to the above URL and return the result we would use:</div><pre style="color: #272822; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; white-space: pre-wrap; word-wrap: break-word;"><code class="php" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: #dddddd; display: block; font-family: Monaco, Consolas, monospace; line-height: 1.5; padding: 0.5em;"><span class="comment" style="color: #75715e;">// Get cURL resource</span><br /><span class="variable">$curl</span> = curl_init();<br /><span class="comment" style="color: #75715e;">// Set some options - we are passing in a useragent too here</span><br />curl_setopt_array(<span class="variable">$curl</span>, <span class="keyword" style="color: #f92672; font-weight: bold;">array</span>(<br />    CURLOPT_RETURNTRANSFER =&gt; <span class="number">1</span>,<br />    CURLOPT_URL =&gt; <span class="string" style="color: #a6e22e;">'http://testcURL.com/?item1=value&amp;item2=value2'</span>,<br />    CURLOPT_USERAGENT =&gt; <span class="string" style="color: #a6e22e;">'Codular Sample cURL Request'</span><br />));<br /><span class="comment" style="color: #75715e;">// Send the request &amp; save response to $resp</span><br /><span class="variable">$resp</span> = curl_exec(<span class="variable">$curl</span>);<br /><span class="comment" style="color: #75715e;">// Close request to clear up some resources</span><br />curl_close(<span class="variable">$curl</span>);<br /></code></pre><h2 style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 32px; font-weight: 100; line-height: 1; margin-bottom: 10px; margin-top: 20px;">POST Request</h2><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">The sole difference between the&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">POST</code>&nbsp;and&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">GET</code>&nbsp;request syntax is the addition of one setting, two if you want to send some data. We'll be setting&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">CURLOPT_POST</code>&nbsp;to&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">true</code>&nbsp;and sending an array of data through with the setting&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">CURLOPT_POSTFIELDS</code></div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">So for example switching the above&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">GET</code>&nbsp;request to be a&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">POST</code>&nbsp;request, we would use the following code:</div><pre style="color: #272822; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; white-space: pre-wrap; word-wrap: break-word;"><code class="php" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: #dddddd; display: block; font-family: Monaco, Consolas, monospace; line-height: 1.5; padding: 0.5em;"><span class="comment" style="color: #75715e;">// Get cURL resource</span><br /><span class="variable">$curl</span> = curl_init();<br /><span class="comment" style="color: #75715e;">// Set some options - we are passing in a useragent too here</span><br />curl_setopt_array(<span class="variable">$curl</span>, <span class="keyword" style="color: #f92672; font-weight: bold;">array</span>(<br />    CURLOPT_RETURNTRANSFER =&gt; <span class="number">1</span>,<br />    CURLOPT_URL =&gt; <span class="string" style="color: #a6e22e;">'http://testcURL.com'</span>,<br />    CURLOPT_USERAGENT =&gt; <span class="string" style="color: #a6e22e;">'Codular Sample cURL Request'</span>,<br />    CURLOPT_POST =&gt; <span class="number">1</span>,<br />    CURLOPT_POSTFIELDS =&gt; <span class="keyword" style="color: #f92672; font-weight: bold;">array</span>(<br />        item1 =&gt; <span class="string" style="color: #a6e22e;">'value'</span>,<br />        item2 =&gt; <span class="string" style="color: #a6e22e;">'value2'</span><br />    )<br />));<br /><span class="comment" style="color: #75715e;">// Send the request &amp; save response to $resp</span><br /><span class="variable">$resp</span> = curl_exec(<span class="variable">$curl</span>);<br /><span class="comment" style="color: #75715e;">// Close request to clear up some resources</span><br />curl_close(<span class="variable">$curl</span>);<br /></code></pre><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">There you have a&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">POST</code>&nbsp;request that will work the same as our&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">GET</code>&nbsp;request above and return the response back to the script so that you can use it as you want.</div><h2 style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 32px; font-weight: 100; line-height: 1; margin-bottom: 10px; margin-top: 20px;">Errors</h2><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">As much as we all hate errors, you really need to take care to account for any eventuality with cURL as ultimately you will not have control over the site(s) that you are sending your request to, you cannot guarantee that the response will be in the format that you want, or that the site will even be available.</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">There are a few functions that you can use to handle errors and these are:</div><ul style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><li><code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">curl_error()</code>&nbsp;- returns a string error message, will be blank&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">''</code>&nbsp;if the request doesn't fail.</li><li><code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">curl_errno()</code>&nbsp;- which will return the cURL error number which you can then look up on<a href="http://curl.haxx.se/libcurl/c/libcurl-errors.html" style="color: #00a3de; font-weight: bold; text-decoration: none;">this page listing error codes</a>.</li></ul><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">An example usage would be:</div><pre style="color: #272822; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; white-space: pre-wrap; word-wrap: break-word;"><code class="php" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: #dddddd; display: block; font-family: Monaco, Consolas, monospace; line-height: 1.5; padding: 0.5em;"><span class="keyword" style="color: #f92672; font-weight: bold;">if</span>(!curl_exec(<span class="variable">$curl</span>)){<br />    <span class="keyword" style="color: #f92672; font-weight: bold;">die</span>(<span class="string" style="color: #a6e22e;">'Error: "'</span> . curl_error(<span class="variable">$curl</span>) . <span class="string" style="color: #a6e22e;">'" - Code: '</span> . curl_errno(<span class="variable">$curl</span>));<br />}<br /></code></pre><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">You might want to look at using the setting&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">CURLOPT_FAILONERROR</code>&nbsp;as&nbsp;<code class="inline" style="background-color: #272822; border-bottom-left-radius: 3px; border-bottom-right-radius: 3px; border-top-left-radius: 3px; border-top-right-radius: 3px; color: white; font-family: Monaco, Consolas, monospace; font-size: 13px; line-height: 1.5; padding: 2px 4px;">true</code>&nbsp;if you want any HTTP response code greater than 400 to cause an error, instead of returning the page HTML.</div><h2 style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 32px; font-weight: 100; line-height: 1; margin-bottom: 10px; margin-top: 20px;">curl_exec($theEnd);</h2><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">cURL is a behemoth, and has many many possibilities.</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">=============== json =============</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">Json.</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><br /></div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">if we get some data from the facebook api like</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><br /></div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">$curl &nbsp;= curl("https://graph.facebook.com?access_token=&lt;access_token&gt;");</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><br /></div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">$result = curl_exec($curl);</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">//note this won't work if are on the localhost.</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">To solve the problem for the localhost use some curl option</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><span style="background-color: #cccccc;">curl_setopt($curl,CURLOPT_SSL_VERIFYPEER,false);</span></div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">And this wll solve the problem.</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">if you wan't to store the response in some variable. use</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><br /></div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><span style="background-color: #cccccc;">curl_setopt($curl,CURLOPT_RETURNGTRANSFER,1);</span></div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><br /></div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">Now, we can store this into the variable.</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">$result = curl_exec($curl);</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">If we look at the type to the $result.</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">echo gettype($result);</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">o/p : &nbsp;string.</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><br /></div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">Convert it to the json using builtin json_decode.</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><span style="background-color: #d9ead3;">$result_json = json_encode($result);</span></div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">Note : if we want this as the array(nested-array)use it as</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><span style="background-color: #cfe2f3;">$result_array = json_encode($result,true);</span></div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><br /></div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">To access the values from the json object do,</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><span style="background-color: #d9ead3;">echo $result_json-&gt;paging-&gt;next;</span></div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">For the array's we all know.</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><span style="background-color: #d0e0e3;">echo $result_array['paging']['next'];</span></div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><br /></div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><br /></div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">Hope, this helps you guys.</div><div style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;">Note to get access_token from the facebook use your hosted website with SSL (this is the easiest way).</div><span style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><br /></span><span style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><span style="background-color: #666666;">curl with cookies&nbsp;</span></span><br /><span style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><br /></span><pre class="prettyprint lang-default-markup" style="background-color: #f4f4f4; border-left-color: rgb(108, 226, 108); border-left-style: solid; border-width: 0px 0px 0px 3px; color: #373737; font-family: Monaco, 'DejaVu Sans Mono', 'Bitstream Vera Sans Mono', 'Lucida Console', monospace !important; font-size: 13px; line-height: 1.5; margin-bottom: 2em; margin-left: 5px; outline: 0px; overflow: auto; padding: 0.75em 2em 0.75em 18px; vertical-align: baseline;">&lt;?php<br /><br />/* STEP 1. let’s create a cookie file */<br /><br />$ckfile = tempnam ("/tmp", "CURLCOOKIE");<br /><br />/* STEP 2. visit the homepage to set the cookie properly */<br /><br />$ch = curl_init ("http://somedomain.com/");<br />curl_setopt ($ch, CURLOPT_COOKIEJAR, $ckfile);<br />curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);<br />$output = curl_exec ($ch);<br /><br />/* STEP 3. visit cookiepage.php */<br /><br />$ch = curl_init ("http://somedomain.com/cookiepage.php");<br />curl_setopt ($ch, CURLOPT_COOKIEFILE, $ckfile);<br />curl_setopt ($ch, CURLOPT_RETURNTRANSFER, true);<br />$output = curl_exec ($ch);<br /><br />/* here you can do whatever you want with $output */<br /><br />?&gt;</pre><span style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><br /></span><span style="color: #272822; font-family: nimbus-sans, Helvetica, sans-serif; font-size: 20px; line-height: 30px;"><br /></span></div>
